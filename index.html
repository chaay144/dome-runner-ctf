<!doctype html>
<!-- vTEST-1 -->
<html>
  <head>
    <meta charset="utf-8">
    <title>CTF Minimal Test</title>
  </head>
  <body>
    <h1>CTF Minimal Test</h1>
    <div id="grid"></div>

    <script>
      // If you can see a card below this heading, JS is running and data is rendering.
      const DATA = [
        {
          id: 6,
          title: "Street Terminal Boot",
          chapter: "Slum",
          difficulty: "Easy",
          points: 5,
          folder_url: "https://github.com/chaay144/dome-runner-ctf/tree/main/challenges/ch06-street-terminal-boot",
          description: "Find the shutdown password inside the binary.",
          hint: "Use `strings` or view .rodata in Ghidra.",
          answer_hash: "5408eb37de42e51e9e66bbbfb20732c653a8b9b8de4b576f0b2d5a33b5fcd28f",
          input_placeholder: "DOME_BOOT_OK_7F3A"
        }
      ];

      function render() {
        const g = document.getElementById('grid');
        if (!g) { document.body.innerHTML += "<p>grid not found</p>"; return; }
        const c = DATA[0];
        g.innerHTML =
          "<div>" +
            "<h3>" + c.id + ". " + c.title + "</h3>" +
            "<p><b>Chapter:</b> " + c.chapter + " | <b>Diff:</b> " + c.difficulty + " | <b>Points:</b> " + c.points + "</p>" +
            "<p>" + c.description + "</p>" +
            "<p><a href='" + c.folder_url + "' target='_blank'>Open Challenge Folder</a></p>" +
            "<input id='ans' placeholder='" + (c.input_placeholder||"Type answer") + "'>" +
            "<button onclick='submitAns()'>Submit</button> " +
            "<span id='fb'></span>" +
          "</div>";
      }

      async function sha256Hex(s){
        const buf = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(s));
        return [...new Uint8Array(buf)].map(b=>b.toString(16).padStart(2,"0")).join("");
      }
      async function submitAns(){
        const v = (document.getElementById("ans").value||"").trim();
        const h = await sha256Hex(v);
        document.getElementById("fb").textContent =
          (h === DATA[0].answer_hash) ? "✓ Correct" : "✗ Incorrect";
      }

      render();
      // If you see "JS OK" below, the script ran at least once.
      document.body.insertAdjacentHTML("beforeend","<p style='color:gray'>JS OK</p>");
    </script>
  </body>
</html>
